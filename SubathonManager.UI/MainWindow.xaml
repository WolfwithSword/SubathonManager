<ui:FluentWindow x:Class="SubathonManager.UI.MainWindow"
                       xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                       xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                       xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                       xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                       xmlns:local="clr-namespace:SubathonManager.UI"
                       xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
                       mc:Ignorable="d"
                       Background="{DynamicResource UiBrushPrimary}"
                       ResizeMode="NoResize"
                       WindowStartupLocation="CenterScreen"
                       Title="Subathon Manager" Height="800" Width="1200">
    
    <Grid>
        <ui:TitleBar Title="Subathon Manager"
                     x:Name="TitleBar"
                     Icon="Assets/appicon.ico"
                     ShowMinimize="True"
                     Background="#101010"
                     ShowMaximize="False"
                     ShowClose="True"
                     DockPanel.Dock="Top"/>
        <TabControl Margin="0,40,0,0">
            <!-- Home Tab -->
            <TabItem Header="Home">
                <ScrollViewer>
                    <StackPanel Margin="10">
                        <TextBlock Text="Welcome to Subathon Manager!" 
                                   FontSize="22" FontWeight="Bold" Margin="0,0,0,10"/>
                        <TextBlock Text="Use the Overlays tab to manage your routes and the Settings tab to configure the server." 
                                   TextWrapping="Wrap" FontSize="16"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Overlays Tab -->
            <TabItem Header="Overlays">
                <Grid Margin="10">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*"/>
                        <ColumnDefinition Width="3*"/>
                    </Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,10">
                        <TextBlock Text="Overlays" 
                                   FontWeight="Bold" 
                                   FontSize="18"
                                   VerticalAlignment="Center"/>
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="4,0,0,0">
                            <ui:Button Icon="Add24" Foreground="White"
                                       Appearance="Primary"
                                       Content="Create New"
                                       Width="130" Padding="2"
                                       Click="AddRoute_Click"
                                       Margin="10,0,0,0"></ui:Button>
                        </StackPanel>
                    </StackPanel>
                    
                    <!-- Routes List -->
                    <ScrollViewer Grid.Column="0" Grid.Row="1" VerticalScrollBarVisibility="Auto">
                        <ItemsControl x:Name="OverlaysList">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <ui:Card  MouseDoubleClick="RouteCard_MouseDoubleClick" Margin="0,0,0,8"
                                              Padding="12"
                                              BorderBrush="{DynamicResource UiBrushBorder}"
                                              Background="{DynamicResource UiBrushControlBackground}">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Orientation="Vertical" 
                                                        VerticalAlignment="Center"
                                                        HorizontalAlignment="Left">
                                                <TextBlock Text="{Binding Name}" 
                                                           FontWeight="SemiBold"
                                                           FontSize="16"/>
                                            </StackPanel>

                                            <StackPanel x:Name="ActionsPanel"
                                                        Orientation="Horizontal"
                                                        Grid.Column="1"
                                                        Opacity="0"
                                                        VerticalAlignment="Center"
                                                        Margin="10,0,0,0">
                                                <ui:Button ToolTip="Copy Link" Click="CopyRouteUrl_Click" Padding="2" Appearance="Secondary" Width="32" Height="32" Margin="4,0" Foreground="White">
                                                    <ui:SymbolIcon Symbol="Link24" />
                                                </ui:Button>
                                                <ui:Button ToolTip="Edit" Click="EditRoute_Click" Padding="2" Appearance="Secondary" Width="32" Height="32" Margin="4,0" Foreground="White">
                                                    <ui:SymbolIcon Symbol="Edit24" />
                                                </ui:Button>
                                                <ui:Button ToolTip="Copy" Click="DuplicateRoute_Click" Padding="2" Appearance="Secondary" Width="32" Height="32" Margin="4,0" Foreground="White"><ui:SymbolIcon Symbol="Copy24" /></ui:Button>
                                                <ui:Button ToolTip="Delete" Click="DeleteRoute_Click" Padding="2" Appearance="Danger" Width="32" Height="32" Margin="4,0" Foreground="White"><ui:SymbolIcon Symbol="Delete24" /></ui:Button>
                                            </StackPanel>

                                            
                                        </Grid>
                                        <ui:Card.Triggers>
                                            <EventTrigger RoutedEvent="MouseEnter">
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetName="ActionsPanel"
                                                                         Storyboard.TargetProperty="Opacity"
                                                                         To="1" Duration="0:0:0.15"/>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                            <EventTrigger RoutedEvent="MouseLeave">
                                                <BeginStoryboard>
                                                    <Storyboard>
                                                        <DoubleAnimation Storyboard.TargetName="ActionsPanel"
                                                                         Storyboard.TargetProperty="Opacity"
                                                                         To="0" Duration="0:0:0.15"/>
                                                    </Storyboard>
                                                </BeginStoryboard>
                                            </EventTrigger>
                                        </ui:Card.Triggers>
                                    </ui:Card>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </ScrollViewer>
                </Grid>
            </TabItem>

            <!-- Settings Tab -->
            <TabItem Header="Settings">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Margin="10">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Server Settings" FontWeight="Bold" FontSize="16" Margin="0,0,0,10"/>
                            <TextBlock x:Name="DataFolderText" VerticalAlignment="Center" FontSize="12" Margin="24,0,0,10"/>
                        </StackPanel>
                        <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                            <TextBlock Text="Port:" Width="50" VerticalAlignment="Center"/>
                            <ui:TextBox x:Name="ServerPortTextBox" Width="100"/>
                        </StackPanel>

                        <ui:Button x:Name="SaveSettingsButton" Content="Save Settings" Width="120" Height="30" Margin="0,10,0,5"/>
                        <StackPanel Orientation="Horizontal">
                            <ui:Button x:Name="ConnectTwitchBtn"
                                       Content="Connect Twitch"
                                       Width="150"
                                       Height="35"
                                       Margin="0,5,0,10"
                                       Click="ConnectTwitchButton_Click"/>
                            <TextBlock x:Name="TwitchStatusText" VerticalAlignment="Center" FontSize="12" Margin="14 0 0 10"/>
                        </StackPanel>
                         <!-- Subathon Values -->
                        
                        <Separator Margin="0,10"/>
                        <TextBlock Text="Subathon Values" FontWeight="Bold" FontSize="16" Margin="0,20,0,10"/>
                        
                        <!-- Twitch --> 
                        <Expander Header="Twitch" IsExpanded="True">
                            <StackPanel Margin="10,5,0,5">
                                <!-- Cheer / Bits -->
                                <StackPanel Orientation="Horizontal" Margin="0,2">
                                    <TextBlock Text="Cheers/Bits:" Width="150" VerticalAlignment="Center"/>
                                    <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                x:Name="CheerTextBox"/>
                                    <TextBlock Margin="8 0 0 0" Text="Seconds per 100" Width="150" VerticalAlignment="Center"/>
                                    
                                    <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                x:Name="Cheer2TextBox"/>
                                    <TextBlock Margin="8 0 0 0"  Text="Points per 100, rounded down" Width="150" VerticalAlignment="Center"/>
                                </StackPanel>

                                <!-- Raid -->
                                <StackPanel Orientation="Horizontal" Margin="0,2">
                                    <TextBlock Text="Raids:" Width="150" VerticalAlignment="Center"/>
                                    <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                x:Name="RaidTextBox"/>
                                    <TextBlock Margin="8 0 0 0" Text="Seconds" Width="150" VerticalAlignment="Center"/>
                                    <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                x:Name="Raid2TextBox"/>
                                    <TextBlock Margin="8 0 0 0"  Text="Points" Width="150" VerticalAlignment="Center"/>
                                </StackPanel>

                                <!-- Follows -->
                                <StackPanel Orientation="Horizontal" Margin="0,2">
                                    <TextBlock Text="Follows:" Width="150" VerticalAlignment="Center"/>
                                    <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                x:Name="FollowTextBox"/>
                                    <TextBlock Margin="8 0 0 0" Text="Seconds" Width="150" VerticalAlignment="Center"/>
                                    <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                x:Name="Follow2TextBox"/>
                                    <TextBlock Margin="8 0 0 0"  Text="Points" Width="150" VerticalAlignment="Center"/>
                                </StackPanel>

                                <!-- Subs -->
                                <Expander Header="Subs" IsExpanded="True" Margin="0,5,0,0">
                                    <StackPanel Margin="10,5,0,5">
                                        <StackPanel Orientation="Horizontal" Margin="0,2">
                                            <TextBlock Text="T1 Sub:" Width="100" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="SubT1TextBox"/>
                                            <TextBlock Margin="8 0 0 0" Text="Seconds" Width="120" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="SubT1TextBox2"/>
                                            <TextBlock Margin="8 0 0 0"  Text="Points" Width="100" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,2">
                                            <TextBlock Text="T2 Sub:" Width="100" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="SubT2TextBox"/>
                                            <TextBlock Margin="8 0 0 0" Text="Seconds" Width="120" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="SubT2TextBox2"/>
                                            <TextBlock Margin="8 0 0 0"  Text="Points" Width="100" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,2">
                                            <TextBlock Text="T3 Sub:" Width="100" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="SubT3TextBox"/>
                                            <TextBlock Margin="8 0 0 0" Text="Seconds" Width="120" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="SubT3TextBox2"/>
                                            <TextBlock Margin="8 0 0 0"  Text="Points" Width="100" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,2">
                                            <TextBlock Text="T1 GiftSub:" Width="100" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="GiftSubT1TextBox"/>
                                            <TextBlock Margin="8 0 0 0" Text="Seconds" Width="120" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="GiftSubT1TextBox2"/>
                                            <TextBlock Margin="8 0 0 0"  Text="Points" Width="100" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,2">
                                            <TextBlock Text="T2 GiftSub:" Width="100" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="GiftSubT2TextBox"/>
                                            <TextBlock Margin="8 0 0 0" Text="Seconds" Width="120" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="GiftSubT2TextBox2"/>
                                            <TextBlock Margin="8 0 0 0"  Text="Points" Width="100" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <StackPanel Orientation="Horizontal" Margin="0,2">
                                            <TextBlock Text="T3 GiftSub:" Width="100" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="GiftSubT3TextBox"/>
                                            <TextBlock Margin="8 0 0 0" Text="Seconds" Width="120" VerticalAlignment="Center"/>
                                            <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput" 
                                                        x:Name="GiftSubT3TextBox2"/>
                                            <TextBlock Margin="8 0 0 0" Text="Points" Width="100" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <!-- so the twitchlib for some reason doesnt have a tier for prime?? need to investigate -->
                                        <!-- <StackPanel Orientation="Horizontal" Margin="0,2"> -->
                                        <!--     <TextBlock Text="Prime Sub (seconds):" Width="200" VerticalAlignment="Center"/> -->
                                        <!--     <ui:TextBox Width="100" PreviewTextInput="NumberOnly_PreviewTextInput"  -->
                                        <!--              " x:Name="SubPrimeTextBox"/> -->
                                        <!-- </StackPanel> -->
                                    </StackPanel>
                                </Expander>
                            </StackPanel>
                        </Expander>

                        <Expander Header="Commands" IsExpanded="False">
                            <StackPanel Margin="10,5,0,5">
                                <!-- commands -->
                            </StackPanel>
                        </Expander>


                        <ui:Button x:Name="SaveAllSubathonValuesButton" Content="Save All" Width="120" Height="30" Margin="0,20,0,0" Click="SaveAllSubathonValuesButton_Click"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </Grid>
</ui:FluentWindow>
